<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">

    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.bootcss.com/weui/1.1.2/style/weui.min.css" rel="stylesheet">
    <link href="./main.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/moment.js/2.17.0/moment.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/vue/2.2.1/vue.min.js"></script>
    <script src="./dcore.js"></script>
    <link href="./font/iconfont.css" rel="stylesheet">
      <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <title>缸瓦市聚会记录</title>
    <style>
     

    </style>
</head>
<body >
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        
    <div class="container-fluid">
    <div class="navbar-header">
        <a class="navbar-brand" href="#"><i class="glyphicon glyphicon-tree-deciduous"></i> 主页</a>
          <p class="navbar-text">缸瓦市教堂的证道记录</p>
    </div>
    </div>
</nav>
    
    <div id="vue" class="content" style="">
    <div id="big" style="margin:0px 5px 100px 5px;">
        <!--<div class="page__hd" style="margin-bottom:10px;">
        <h1 class="page__title">
            缸瓦市教堂的证道视频和音频记录
        </h1>
        <p class="page__desc">缸瓦市教堂的证道视频和音频记录</p>
    </div>-->
    <div class="weui-flex media_tab">
        <div class="weui-flex__item">
            <a href="javascript:;" class="weui-btn weui-btn_plain-primary weui-btn_plain-disabled media_btn active" media-type="1"><i class="iconfont icon-yinpin"></i> 音频</a>
            </div>
        <div class="weui-flex__item">
            <a href="javascript:;" class="weui-btn weui-btn_plain-primary weui-btn_plain-disabled media_btn" media-type="2">  <i class="iconfont icon-shipin"></i> 视频</a>
            </div>
        
    </div>
        <div class="weui-cells">

            <a class="weui-cell weui-cell_access" v-bind:href="'media-'+type_text+'.html?id='+media.id" style="" v-for="media in list">
                <div class="weui-cell__hd"><img src="./images/church.png" alt="" style="width:50px;margin-right:5px;display:block"></div>
                <div class="weui-cell__bd">
                    <p>{{ media.title }}-{{ media.speaker }}</p>
                </div>
                <div class="weui-cell__ft">{{ media.make_time | date_year }}</div>
            </a>
          
        </div>
        <div v-html="page_view">

        </div>
    </div>

            </div>
            <script>
                var vue = new Vue({
                    el:"#vue",
                    data:{
                        list:{},
                        page_view:"",
                        type:1,
                        type_text:'audio',
                    }
                });

                $(".media_btn").click(function(){
                    $(".media_btn").removeClass('active');
                    $(this).addClass('active');
                    vue.type = $(this).attr("media-type");
                    if(vue.type==1){
                        vue.type_text = "audio";
                    }else{
                        vue.type_text = "video";
                    }
                    getList();
                })
                $(function(){
                    getList();
                });

                function getList(page){
            var data={};
            if(page==''||page==undefined) {
                data.page = 1;
            }else{
                data.page=page;
            }
            data.type = vue.type;
            data.size = 10;
            if($('#title').val() != ''){
                data.title = $('#title').val();
            }
            $.get("http://back.kaffir-lily.cc/mediaList",
                    data,
                    function(data){
                        vue.list=data.data;
                        vue.page_view = D.simplePagination('getList',data.last_page,data.current_page,data.per_page,data.total);
                    });
            }

                // $.get("http://www.dawnlight.com/media/1",function(result){
// http://www.dawnlight.com/mediaList
                // });
            </script>
</body>
</html>